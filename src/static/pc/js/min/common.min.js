var _hmt=_hmt||[],cnzz_protocol="https:"==document.location.protocol?" https://":" http://";window.hm={conf:{apiPath:"http://www.9ihaomai.com",secret:"91vmai-beijng-201688888",key:"",getKey:function(){hm.ajax.sendAjax(hm.conf.apiPath+"/system/gen.json","get",null,function(t){hm.conf.key=t.data})}},$:function(t,n){return n||(n=document),0==t.indexOf(".")?n.getElementsByClassName(t.substring(1)):0==t.indexOf("#")?n.getElementById(t.substring(1)):n.getElementsByTagName(t)},ajax:{XHR:function(){var n;try{n=new XMLHttpRequest}catch(t){for(var o=["Msxml3.XMLHTTP","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],e=0,i=o.length;e<i;e++)try{n=new ActiveXObject(o[e])}catch(t){continue}}return n},sendAjax:function(t,n,o,e){var i=this.XHR();i.open(n,t,!0),console.log("send"),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status)return console.log(JSON.parse(i.responseText)),void("function"==typeof e&&e(JSON.parse(i.responseText)))},"post"==n&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;application/json;charset=utf-8"),i.send(o)}},body:document.body,applyModal:{modalInit:function(){this.modal=hm.$(".hm-modal")[0],this.modalDialog=hm.$(".hm-modal-dialog",this.modal)[0],this.applyContent=hm.$(".hm-applymodal-content",this.modalDialog)[0],this.tipContent=hm.$(".hm-tip-content",this.modalDialog)[0],this.guanbi=hm.$(".icon-guanbi",this.modalDialog)[0],this.submitBtn=hm.$(".hm-applymodal-content-right-form-submit",this.applyContent)[0],this.getCodeBtn=hm.$(".hm-applymodal-content-right-form-code-btn",this.applyContent)[0],this.tel=hm.$(".hm-applymodal-content-right-form-tel",this.applyContent)[0],this.code=hm.$(".hm-applymodal-content-right-form-code",this.applyContent)[0],hm.$(".tip-show",this.applyContent)[0]&&hm.$(".tip-show",this.applyContent)[0].classList.remove("tip-show"),this.applyContent.style.display="block",this.tipContent.style.display="none"},submitAction:function(){var n=this,t=hm.$(".hm-applymodal-content-right-form-name",n.applyContent)[0],o=hm.$(".hm-applymodal-content-right-form-company",n.applyContent)[0],e=hm.$(".hm-applymodal-content-right-form-postion",n.applyContent)[0];return hm.$(".tip-show",n.applyContent)[0]&&hm.$(".tip-show",n.applyContent)[0].classList.remove("tip-show"),hm.$("input",t)[0].value.trim()?hm.$("input",o)[0].value.trim()?hm.$("input",e)[0].value.trim()?hm.$("input",n.tel)[0].value.trim()?/^\d{11}$/.test(hm.$("input",n.tel)[0].value.trim())?hm.$("input",n.code)[0].value.trim()?(n.submitBtn.onclick=null,void hm.ajax.sendAjax(hm.conf.apiPath+"/system/register.json?name="+hm.$("input",t)[0].value.trim()+"&trade="+hm.$("input",o)[0].value.trim()+"&gen="+hm.conf.key+"&token="+hex_md5(hm.conf.secret+hm.conf.key)+"&mobile="+hm.$("input",n.tel)[0].value.trim()+"&code="+hm.$("input",n.code)[0].value+"&position="+hm.$("input",e)[0].value.trim(),"post",null,function(t){hm.conf.getKey(),t.code,n.hideModal(),n.showTipModal()})):(hm.$(".hm-tips",n.code)[0].innerText="请输入手机验证码",void n.code.classList.add("tip-show")):(hm.$(".hm-tips",n.tel)[0].innerText="手机号码格式错误",void n.tel.classList.add("tip-show")):(hm.$(".hm-tips",n.tel)[0].innerText="请输入手机号",void n.tel.classList.add("tip-show")):(hm.$(".hm-tips",e)[0].innerText="请输入职位名称",void e.classList.add("tip-show")):(hm.$(".hm-tips",o)[0].innerText="请输入公司名",void o.classList.add("tip-show")):(hm.$(".hm-tips",t)[0].innerText="请输入姓名",void t.classList.add("tip-show"))},showModal:function(){var t=this;hm.body.classList.add("modal-open"),t.modalInit(),t.modalDialog.onclick=function(t){(t=window.event||t).stopPropagation()},t.guanbi.onclick=function(){t.hideModal()},t.modal.onclick=function(){t.hideModal()},t.getCodeBtn.onclick=function(){t.getCode()},t.submitBtn.onclick=function(){t.submitAction()}},hideModal:function(){for(var t=this,n=hm.$("input",t.applyContent),o=0,e=n.length;o<e;o++)n[o].value="";clearInterval(t.timeId),t.getCodeBtn.innerText="获取验证码",hm.body.classList.remove("modal-open")},showTipModal:function(){var t=this;hm.body.classList.add("modal-open"),t.modalInit(),t.modalDialog.onclick=function(t){(t=window.event||t).stopPropagation()},t.guanbi.onclick=function(){t.hideModal()},t.modal.onclick=function(){t.hideModal()},t.applyContent.style.display="none",t.tipContent.style.display="block"},getCode:function(){var n=this;if("hm-applymodal-content-right-form-code-btn getting"!=n.getCodeBtn.className){if(hm.$(".tip-show",this.applyContent)[0]&&hm.$(".tip-show",this.applyContent)[0].classList.remove("tip-show"),!hm.$("input",n.tel)[0].value.trim())return hm.$(".hm-tips",n.tel)[0].innerText="请输入手机号",void n.tel.classList.add("tip-show");if(!hm.$("input",n.tel)[0].value.trim())return hm.$(".hm-tips",n.tel)[0].innerText="手机号码格式错误",void n.tel.classList.add("tip-show");n.getCodeBtn.onclick=null,n.getCodeBtn.className="hm-applymodal-content-right-form-code-btn getting",n.getCodeBtn.innerText="30秒后可重发",n.timeId&&clearInterval(n.timeId),n.timeId=setInterval(function(){var t=n.getCodeBtn.innerText.match(/\d{1,2}/)[0];if(!(0<(t=parseInt(t))))return clearInterval(n.timeId),n.getCodeBtn.className="hm-applymodal-content-right-form-code-btn",n.getCodeBtn.innerText="获取验证码",void(n.getCodeBtn.onclick=function(){n.getCode()});t-=1,n.getCodeBtn.innerText=t+"秒后可重发"},1e3),hm.ajax.sendAjax(hm.conf.apiPath+"/sms/send.json?gen="+hm.conf.key+"&token="+hex_md5(hm.conf.secret+hm.conf.key)+"&mobile="+hm.$("input",n.tel)[0].value.trim(),"get",null,function(t){hm.conf.getKey(),"MRMCM0001"==t.code&&(n.code.focus(),n.getCodeBtn.onclick=function(){n.getCode()})})}}},header:{init:function(){this.header=hm.$(".hm-header")[0],this.applyBtns=hm.$(".hm-header-btn-register"),console.log(this.applyBtn),Array.prototype.forEach.call(this.applyBtns,function(t){t.onclick=function(){hm.applyModal.showModal()}})}},footer:{init:function(){this.footerApplyBtn=hm.$(".hm-footer-register")[0],this.footerApplyBtn.onclick=function(){hm.applyModal.showModal()}}},commonInit:function(){hm.conf.getKey(),hm.header.init(),hm.footer.init()}},hm.commonInit();