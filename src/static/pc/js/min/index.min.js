var player=null;function VideoCarousel(){this.createVideo=function(e){player=new chplayer({logo:" ",container:"#video",variable:"player",video:e,autoplay:!1,poster:"http://wac.2f9ad.chicdn.net/802F9AD/u/joyent.wme/public/wme/assets/ec050984-7b81-11e6-96e0-8905cd656caf.jpg?v=30"})},this.changeVideo=function(e){this.createVideo(e)}}function Carousel(e,n,t){this.dotList=[],this.potTimer=null,this.banners=e,this.dots=n,this.dotPath=t,this.changeBanner=function(e){var t=this;e=Number(e);for(var i=hm.$(t.banners),n=0,a=i.length;n<a;n++)n==e?(i[n].style.display="block",t.dots[n].style.strokeDashoffset=0):(i[n].style.display="none",t.dots[n].style.strokeDashoffset=282.783)},this.makePath=function(e){var t=this,i=282.783;t.potTimer&&window.clearInterval(t.potTimer),t.potTimer=window.setInterval(function(){0<i?(i-=282783/(60*t.bannerPlayTime),t.dots[e].style.strokeDashoffset=i):window.clearInterval(t.potTimer)},1e3/60)},this.init=function(){var e=this;e.dotList=hm.$(n),e.nowNum=1,e.bannerPlayTime=5e3,e.bannerTimer=window.setInterval(function(){e.nowNum==e.dotList.length&&(e.nowNum=0),e.changeBanner(e.nowNum),e.makePath(e.nowNum),e.nowNum++},e.bannerPlayTime),e.potTimer=null,e.dots=hm.$(e.dotPath);for(var t=0,i=e.dotList.length;t<i;t++)e.dotList[t].onclick=function(){console.log("click"),window.clearInterval(e.potTimer),window.clearInterval(e.bannerTimer),e.changeBanner(this.dataset.index)};e.makePath(0)}}(new function(){this.header={isHeaderChanged:!1,changeHeader:function(){hm.header.header.className="hm-header",this.isHeaderChanged=!0},initHeader:function(){hm.header.header.className="hm-header header-init",this.isHeaderChanged=!1},scrollHeight:500,init:function(){var t=this;window.onscroll=function(){var e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;e>t.scrollHeight&&!1===t.isHeaderChanged?t.changeHeader():e<=t.scrollHeight&&!0===t.isHeaderChanged&&t.initHeader()}}},this.video={playerObj:null,init:function(){var t=this;this.playerList=hm.$(".hm-video-list-item");for(var e=0;e<this.playerList.length;e++)this.playerList[e].addEventListener("click",function(e){t.playerObj.changeVideo(e.target.dataset.src),Array.prototype.forEach.call(t.playerList,function(e){e.classList.remove("video-active")}),e.target.classList.add("video-active")});this.playerObj=new VideoCarousel,this.playerObj.createVideo(this.playerList[0].dataset.src),this.playerList[0].classList.add("video-active")}},this.init=function(){this.header.init(),new Carousel(".banner",".dotA",".dotpath1").init(),new Carousel(".logobanner",".dotB",".dotpath2").init(),new Carousel(".commentbanner",".dotC",".dotpath3").init(),this.video.init(),hm.$(".apply-btn")[0].onclick=function(){hm.applyModal.showModal()}}}).init();